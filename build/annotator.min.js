(function(){var l,n=this;
function p(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function s(a){return"array"==p(a)}function aa(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function u(a){return a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function v(a,b,c){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return v.apply(null,arguments)}
function w(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function ga(a,b){function c(){}c.prototype=b.prototype;a.Y=b.prototype;a.prototype=new c};function ha(a){if(!ia.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(ja,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(ka,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(la,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(ma,"\x26quot;"));return a}var ja=/&/g,ka=/</g,la=/>/g,ma=/\"/g,ia=/[&<>\"]/;var x=Array.prototype,na=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(t(a))return t(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},y=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},oa=x.filter?function(a,b,c){return x.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,f=t(a)?
a.split(""):a,h=0;h<d;h++)if(h in f){var k=f[h];b.call(c,k,h,a)&&(e[g++]=k)}return e};function z(a,b){return 0<=na(a,b)}function pa(a,b){var c=na(a,b),d;(d=0<=c)&&x.splice.call(a,c,1);return d}function qa(a){return x.concat.apply(x,arguments)}function ra(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function sa(a,b,c){return 2>=arguments.length?x.slice.call(a,b):x.slice.call(a,b,c)}
function ta(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];s(d)?b.push.apply(b,ta.apply(null,d)):b.push(d)}return b};var A,ua,va,wa;function xa(){return n.navigator?n.navigator.userAgent:null}wa=va=ua=A=!1;var B;if(B=xa()){var ya=n.navigator;A=0==B.lastIndexOf("Opera",0);ua=!A&&(-1!=B.indexOf("MSIE")||-1!=B.indexOf("Trident"));va=!A&&-1!=B.indexOf("WebKit");wa=!A&&!va&&!ua&&"Gecko"==ya.product}var C=A,D=ua,E=wa,F=va,za=n.navigator,Aa=-1!=(za&&za.platform||"").indexOf("Mac");function Ba(){var a=n.document;return a?a.documentMode:void 0}var Ca;
a:{var Da="",G;if(C&&n.opera)var Ea=n.opera.version,Da="function"==typeof Ea?Ea():Ea;else if(E?G=/rv\:([^\);]+)(\)|;)/:D?G=/\b(?:MSIE|rv)\s+([^\);]+)(\)|;)/:F&&(G=/WebKit\/(\S+)/),G)var Fa=G.exec(xa()),Da=Fa?Fa[1]:"";if(D){var Ga=Ba();if(Ga>parseFloat(Da)){Ca=String(Ga);break a}}Ca=Da}var Ha={};
function H(a){var b;if(!(b=Ha[a])){b=0;for(var c=String(Ca).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var f=c[g]||"",h=d[g]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var r=k.exec(f)||["","",""],q=m.exec(h)||["","",""];if(0==r[0].length&&0==q[0].length)break;b=((0==r[1].length?0:parseInt(r[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==r[1].length?0:parseInt(r[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==r[2].length)<(0==q[2].length)?-1:(0==r[2].length)>(0==q[2].length)?1:0)||(r[2]<q[2]?-1:r[2]>q[2]?1:0)}while(0==b)}b=Ha[a]=0<=b}return b}var Ia=n.document,I=Ia&&D?Ba()||("CSS1Compat"==Ia.compatMode?parseInt(Ca,10):5):void 0;var Ja,Ka=!D||D&&9<=I;!E&&!D||D&&D&&9<=I||E&&H("1.9.1");D&&H("9");var La=D||C||F;function Ma(a){a=a.className;return t(a)&&a.match(/\S+/g)||[]}function Na(a,b){for(var c=Ma(a),d=sa(arguments,1),e=c.length+d.length,g=c,f=0;f<d.length;f++)z(g,d[f])||g.push(d[f]);a.className=c.join(" ");return c.length==e}function Oa(a,b){var c=Ma(a),d=sa(arguments,1),c=Pa(c,d);a.className=c.join(" ")}function Pa(a,b){return oa(a,function(a){return!z(b,a)})}function Qa(a,b,c){c?Na(a,b):Oa(a,b)};function Ra(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}Ra.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Sa(a,b){this.width=a;this.height=b}Sa.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};function Ta(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Ua(a){var b={},c;for(c in a)b[c]=a[c];return b}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Va.length;g++)c=Va[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Wa(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,f;f=c[g];g++)a==f.nodeName&&(d[e++]=f);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;f=c[g];g++)a=f.className,"function"==typeof a.split&&z(a.split(/\s+/),b)&&(d[e++]=f);d.length=e;return d}return c}
function Xa(a,b){Ta(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Ya?a.setAttribute(Ya[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Ya={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function K(a,b,c){var d=arguments,e=document,g=d[0],f=d[1];if(!Ka&&f&&(f.name||f.type)){g=["\x3c",g];f.name&&g.push(' name\x3d"',ha(f.name),'"');if(f.type){g.push(' type\x3d"',ha(f.type),'"');var h={};J(h,f);delete h.type;f=h}g.push("\x3e");g=g.join("")}g=e.createElement(g);f&&(t(f)?g.className=f:s(f)?Na.apply(null,[g].concat(f)):Xa(g,f));2<d.length&&Za(e,g,d);return g}
function Za(a,b,c){function d(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var g=c[e];if(!aa(g)||ba(g)&&0<g.nodeType)d(g);else{var f;a:{if(g&&"number"==typeof g.length){if(ba(g)){f="function"==typeof g.item||"string"==typeof g.item;break a}if("function"==p(g)){f="function"==typeof g.item;break a}}f=!1}y(f?ra(g):g,d)}}}function $a(a,b){a.appendChild(b)}function ab(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}
function L(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function M(a){this.e=a||n.document||document}M.prototype.createElement=function(a){return this.e.createElement(a)};M.prototype.createTextNode=function(a){return this.e.createTextNode(String(a))};M.prototype.appendChild=$a;function bb(a,b){return a.replace(/{([0-9a-zA-Z]+)}/g,function(a,d){return"undefined"!=typeof b[d]?b[d]:a})}var cb={},db={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.bottom-0.1*a.height}}},eb={g:function(a){return{width:a.width,height:a.height,left:a.left,top:a.top}}},fb={g:function(a,b){return{width:a.width,height:b,left:a.left,top:a.top+(a.height-b)/2}}};
function gb(){if(null!=window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var a=window.document;return"CSS1Compat"===document.compatMode?{x:a.documentElement.scrollLeft,y:a.documentElement.scrollTop}:{x:a.body.scrollLeft,y:a.body.scrollTop}};var hb=null,ib=E||F||C||"function"==typeof n.atob;function jb(){};function N(a,b){this.content=a;this.width=b}ga(N,jb);w("tvs.ImageTemplatePart",N);N.prototype.f=function(a){return bb(this.content,[a])};
function kb(a,b,c,d,e,g,f,h){var k=!1,m=a.width.split(" ");switch(m[0]){case "*":b.style.width=h+"%";break;case "repeat":b.style.width="auto";$a(b,K("div"));break;case "height":b.style.width=d.height+"px";b.style.maxWidth=b.style.width;break;case "swag":if(!c)throw Error("Swag part can not be the first");b.style.display="none";h=K("img");m[1]&&(h.style.display="none",h.onload=function(){this.style.height=d.height/+m[1]*this.height;this.style.display=""});h.src=a.f(f);h.style.left=100*e/g+"%";c.appendChild(h);
k=!0;break;case "stretch":h=K("img");h.src=a.f(f);b.appendChild(h);h.removeAttribute("width");h.removeAttribute("height");k=!0;break;default:b.style.width="number"==typeof a.width?a.width+"px":a.width}k||(b.style.backgroundImage='url("'+a.f(f)+'")',b.style.backgroundSize="auto 100%")}N.prototype.A=function(){};function O(a,b,c,d){a=bb('\x3csvg width\x3d"{0}" height\x3d"{1}" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg\x3e\n{2}\n\x3c/g\x3e\n\x3c/svg\x3e',[b,c,a]);N.call(this,a,d);this.H=b;this.G=c}ga(O,N);w("tvs.SvgTemplatePart",O);
O.prototype.f=function(a){var b=bb(this.content,[a]);if(ib)a=n.btoa(b);else{a=[];for(var c=0,d=0;d<b.length;d++){for(var e=b.charCodeAt(d);255<e;)a[c++]=e&255,e>>=8;a[c++]=e}if(!aa(a))throw Error("encodeByteArray takes an array as a parameter");if(!hb)for(hb={},b=0;65>b;b++)hb[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(b);b=hb;c=[];for(d=0;d<a.length;d+=3){var g=a[d],f=(e=d+1<a.length)?a[d+1]:0,h=d+2<a.length,k=h?a[d+2]:0,m=g>>2,g=(g&3)<<4|f>>4,f=(f&15)<<2|k>>
6,k=k&63;h||(k=64,e||(f=64));c.push(b[m],b[g],b[f],b[k])}a=c.join("")}return"data:image/svg+xml;base64,"+a};
O.prototype.A=function(a,b){if("stretch"===this.width){var c,d=L(a),e=P(a,"position"),g=E&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),f=new Ra(0,0),h;c=d?L(d):document;(h=!D)||(h=D&&9<=I)||(h="CSS1Compat"==(c?new M(L(c)):Ja||(Ja=new M)).e.compatMode);h=h?c.documentElement:c.body;if(a!=h)if(a.getBoundingClientRect)c=lb(a),e=(d?new M(L(d)):Ja||(Ja=new M)).e,d=F||"CSS1Compat"!=e.compatMode?e.body:e.documentElement,e=e.parentWindow||
e.defaultView,d=D&&H("10")&&e.pageYOffset!=d.scrollTop?new Ra(d.scrollLeft,d.scrollTop):new Ra(e.pageXOffset||d.scrollLeft,e.pageYOffset||d.scrollTop),f.x=c.left+d.x,f.y=c.top+d.y;else if(d.getBoxObjectFor&&!g)c=d.getBoxObjectFor(a),d=d.getBoxObjectFor(h),f.x=c.screenX-d.screenX,f.y=c.screenY-d.screenY;else{c=a;do{f.x+=c.offsetLeft;f.y+=c.offsetTop;c!=a&&(f.x+=c.clientLeft||0,f.y+=c.clientTop||0);if(F&&"fixed"==P(c,"position")){f.x+=d.body.scrollLeft;f.y+=d.body.scrollTop;break}c=c.offsetParent}while(c&&
c!=a);if(C||F&&"absolute"==e)f.y-=d.body.offsetTop;for(c=a;(c=mb(c))&&c!=d.body&&c!=h;)f.x-=c.scrollLeft,C&&"TR"==c.tagName||(f.y-=c.scrollTop)}f=nb;"none"!=P(a,"display")?f(a):(c=a.style,d=c.display,e=c.visibility,g=c.position,c.visibility="hidden",c.position="absolute",c.display="inline",f(a),c.display=d,c.position=g,c.visibility=e);f=Wa("img",null,a)[0];f.style.transform="scaleX("+b.width/this.H+") scaleY("+b.height/this.G+")";f.style.webkitTransform=f.style.msTransform=f.style.transform}};function Q(a){this.B=t(a)?[new N(a,"repeat")]:s(a)?a:[a]}w("tvs.Template",Q);var R={squiggly:new Q(new O('\x3cline y2\x3d"16.00" x2\x3d"20" y1\x3d"4.00" x1\x3d"10" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4.00" x2\x3d"10" y1\x3d"16.00" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}" fill\x3d"none"/\x3e',20,20,"repeat")),solid:new Q(new O('\x3cline y2\x3d"3" x2\x3d"5" y1\x3d"3" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"2" stroke\x3d"{0}" fill\x3d"none"/\x3e',5,5,"repeat")),dotted:new Q(new O('\x3cline y2\x3d"3" x2\x3d"4" y1\x3d"3" x1\x3d"0" stroke-dasharray\x3d"2, 2" stroke-width\x3d"2" stroke\x3d"{0}" fill\x3d"none"/\x3e',
4,5,"repeat")),dashed:new Q(new O('\x3cline y2\x3d"3" x2\x3d"6" y1\x3d"3" x1\x3d"0" stroke-dasharray\x3d"4, 2" stroke-width\x3d"2" stroke\x3d"{0}" fill\x3d"none"/\x3e',6,5,"repeat")),"double":new Q(new O('\x3cline y2\x3d"1" x2\x3d"5" y1\x3d"1" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e\x3cline y2\x3d"4" x2\x3d"5" y1\x3d"4" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"1" stroke\x3d"{0}" fill\x3d"none"/\x3e',5,5,"repeat")),combined:new Q([new O('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',
10,10,"height"),new O('\x3cline y2\x3d"5" x2\x3d"10" y1\x3d"5" x1\x3d"0" stroke-linecap\x3d"round" stroke-width\x3d"5" stroke\x3d"{0}"/\x3e',10,10,"repeat"),new O('\x3ccircle cx\x3d"5" cy\x3d"5" r\x3d"5" fill\x3d"{0}" /\x3e',10,10,"height")])};w("tvs.AnnotatorDictionary.svgTemplates",R);function ob(){0!=pb&&(this.ca=Error().stack,u(this))}var pb=0;var qb=!D||D&&9<=I,rb=D&&!H("9");!F||H("528");E&&H("1.9b")||D&&H("8")||C&&H("9.5")||F&&H("528");E&&!H("8")||D&&H("9");function S(a,b){this.type=a;this.currentTarget=this.target=b}S.prototype.m=!1;S.prototype.defaultPrevented=!1;S.prototype.T=!0;S.prototype.preventDefault=function(){this.defaultPrevented=!0;this.T=!1};function sb(a){sb[" "](a);return a}sb[" "]=function(){};function T(a,b){a&&this.init(a,b)}ga(T,S);l=T.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.R=!1;l.t=null;
l.init=function(a,b){var c=this.type=a.type;S.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(E){var e;a:{try{sb(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=F||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=F||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.R=Aa?a.metaKey:a.ctrlKey;this.state=a.state;this.t=a;a.defaultPrevented&&this.preventDefault();delete this.m};
l.preventDefault=function(){T.Y.preventDefault.call(this);var a=this.t;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,rb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var tb="closure_listenable_"+(1E6*Math.random()|0),ub=0;function vb(a,b,c,d,e,g){this.c=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.j=g;this.key=++ub;this.d=this.i=!1}function wb(a){a.d=!0;a.c=null;a.proxy=null;a.src=null;a.j=null};var xb={},U={},V={},W={};
function yb(a,b,c,d,e){if(s(b))for(var g=0;g<b.length;g++)yb(a,b[g],c,d,e);else if(c=zb(c),a&&a[tb])a.J.add(b,c,!1,d,e);else a:{if(!b)throw Error("Invalid event type");d=!!d;var f=U;b in f||(f[b]={b:0});f=f[b];d in f||(f[d]={b:0},f.b++);var f=f[d],g=u(a),h;if(f[g]){h=f[g];for(var k=0;k<h.length;k++)if(f=h[k],f.c==c&&f.j==e){if(f.d)break;h[k].i=!1;break a}}else h=f[g]=[],f.b++;k=Ab();f=new vb(c,k,a,b,d,e);f.i=!1;k.src=a;k.c=f;h.push(f);V[g]||(V[g]=[]);V[g].push(f);a.addEventListener?a.addEventListener(b,
k,d):a.attachEvent(b in W?W[b]:W[b]="on"+b,k);xb[f.key]=f}}function Ab(){var a=Bb,b=qb?function(c){return a.call(b.src,b.c,c)}:function(c){c=a.call(b.src,b.c,c);if(!c)return c};return b}function Cb(a,b,c){var d=1;b=u(b);if(a[b])for(a=ra(a[b]),b=0;b<a.length;b++){var e=a[b];e&&!e.d&&(d&=!1!==Db(e,c))}return Boolean(d)}
function Db(a,b){var c=a.c,d=a.j||a.src;if(a.i&&"number"!=typeof a&&a&&!a.d){var e=a.src;if(e&&e[tb]){var g=e.J,f=a.type;f in g.l&&pa(g.l[f],a)&&(wb(a),0==g.l[f].length&&(delete g.l[f],g.da--))}else{var g=a.type,h=a.proxy,f=a.capture;e.removeEventListener?e.removeEventListener(g,h,f):e.detachEvent&&e.detachEvent(g in W?W[g]:W[g]="on"+g,h);e=u(e);V[e]&&(h=V[e],pa(h,a),0==h.length&&delete V[e]);wb(a);if(h=U[g][f][e])pa(h,a),0==h.length&&(delete U[g][f][e],U[g][f].b--),0==U[g][f].b&&(delete U[g][f],
U[g].b--),0==U[g].b&&delete U[g];delete xb[a.key]}}return c.call(d,b)}
function Bb(a,b){if(a.d)return!0;var c=a.type,d=U;if(!(c in d))return!0;var d=d[c],e,g;if(!qb){if(!(c=b))a:{for(var c=["window","event"],f=n;e=c.shift();)if(null!=f[e])f=f[e];else{c=null;break a}c=f}e=c;c=!0 in d;f=!1 in d;if(c){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var h=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==e.returnValue)e.returnValue=!0}}h=new T;h.init(e,this);e=!0;try{if(c){for(var m=[],r=h.currentTarget;r;r=r.parentNode)m.push(r);g=d[!0];for(var q=
m.length-1;!h.m&&0<=q;q--)h.currentTarget=m[q],e&=Cb(g,m[q],h);if(f)for(g=d[!1],q=0;!h.m&&q<m.length;q++)h.currentTarget=m[q],e&=Cb(g,m[q],h)}else e=Db(a,h)}finally{m&&(m.length=0)}return e}d=new T(b,this);return e=Db(a,d)}var Eb="__closure_events_fn_"+(1E9*Math.random()>>>0);function zb(a){return"function"==p(a)?a:a[Eb]||(a[Eb]=function(b){return a.handleEvent(b)})};function Fb(a,b,c){ob.call(this);this.P=a;this.O=b;this.L=c;this.F=v(this.Q,this)}ga(Fb,ob);l=Fb.prototype;l.n=!1;l.u=0;l.p=null;l.fire=function(){this.p||this.u?this.n=!0:Gb(this)};l.Q=function(){this.p=null;this.n&&!this.u&&(this.n=!1,Gb(this))};function Gb(a){var b;b=a.F;var c=a.O;if("function"!=p(b))if(b&&"function"==typeof b.handleEvent)b=v(b.handleEvent,b);else throw Error("Invalid listener argument");b=2147483647<c?-1:n.setTimeout(b,c||0);a.p=b;a.P.call(a.L)};function P(a,b){var c;a:{c=L(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function lb(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function mb(a){if(D&&!(D&&8<=I))return a.offsetParent;var b=L(a),c=P(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=P(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function nb(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=lb(a),new Sa(a.right-a.left,a.bottom-a.top)):new Sa(b,c)};function Hb(a,b,c,d,e){this.type=d;this.color=e;this.I=c;this.a=[];this.r=a;this.s=b;a[c]=this}Hb.prototype.remove=function(){y(this.a,ab);delete this.r[this.I];this.s=this.r=null};w("tvs.ElementAnnotationInfo.prototype.remove",Hb.prototype.remove);function X(a,b,c,d){this.id=a||"annotator";this.v=c;this.Z=b;this.options={height:5,opacity:0.9};J(this.options,d||this.options);this.C=new Fb(v(this.S,this),50);a=this.id;b=v(this.C.fire,this.C);"undefined"===typeof cb[a]&&(cb[a]=b,yb(window,"resize",b))}X.prototype.S=function(){var a;a="tvs-"+this.id;var b=document;a=b.querySelectorAll&&b.querySelector?b.querySelectorAll("."+a):b.getElementsByClassName?b.getElementsByClassName(a):Wa("*",a,void 0);b=v(this.w,this);y(a,b)};
function Ib(a,b){var c=b["_"+a.id+"_info"];c&&(y(c.a,function(b){delete b["_"+a.id+"_for"]}),c.remove())}
X.prototype.w=function(a){a.target&&(a=a.srcElement);var b=a["_"+this.id+"_info"];if(b){for(var c=document.body,d=a.getClientRects(),e=Math.min(d.length,b.a.length),g=this.Z[b.type],f=gb().y,h=0;h<e;h++){var k=Ua(d[h]);k.top+=f;k.bottom+=f;"undefined"===typeof k.width&&(k.width=k.right-k.left,k.height=k.bottom-k.top);var k=this.v.g(k,this.options.height),m=b.a[h].style;m.width=k.width+"px";m.left=k.left+"px";m.top=k.top+"px";Jb(g,b.a[h],k)}for(h=e;h<b.a.length;h++)delete b.a[h]["_"+this.id+"_for"],
ab(b.a[h]);for(h=b.a.length=e;h<d.length;h++){k=Ua(d[h]);k.top+=f;k.bottom+=f;"undefined"===typeof k.width&&(k.width=k.right-k.left,k.height=k.bottom-k.top);e=K("div");e.style.position="absolute";var m=K("div"),k=this.v.g(k,this.options.height),r=Kb(g,b.color,k);m.appendChild(r);e.style.height=m.style.height=k.height+"px";e.style.width=0;m.style.width=k.width+"px";e.style.left=k.left+"px";e.style.top=k.top+"px";e.style.opacity=this.options.opacity;c.appendChild(e);e.appendChild(m);b.a.push(e);e["_"+
this.id+"_for"]=a;Jb(g,r,k);Qa(e,"tvs-annotate-element",!0);(function(a,b){setTimeout(function(){a.style.width=b.style.width},10)})(e,m)}}};function Lb(a,b,c,d){var e=s(b)?ra(b):[b],g="tvs-"+a.id,f=[];Y(a,b);y(e,function(b){f.push(b["_"+a.id+"_info"]=new Hb(b,e,"_"+a.id+"_info",c,d));Qa(b,g,!0);a.w(b)});return f}
function Y(a,b){var c="tvs-"+a.id,d=[];y(s(b)?b:[b],function(b){z(Ma(b),"tvs-annotate-element")&&(b=b["_"+a.id+"_for"]);if(b){var g=b["_"+a.id+"_info"];g&&(g=g.s,Ib(a,b),Qa(b,c,!1),Y(a,g),d=qa(d,g))}});return d}function Kb(a,b,c){var d=K("table"),e=K("tr");d.appendChild(e);var g=0,f=a.B;y(f,function(a){"*"===a.width&&g++});var h=100*g/f.length,k;y(f,function(a,d){var g=K("td");kb(a,g,k,c,d,f.length,b,h);e.appendChild(g);k=g});return d}
function Jb(a,b,c){a=a.B;var d=Wa("td",null,b);y(a,function(a,b){a.A(d[b],c)})};function Z(){this.q=new X("underliner",R,db);this.k=new X("highlighter",R,eb,{opacity:0.45});this.o=new X("striker",R,fb)}w("tvs.Annotator",Z);Z.getTemplates=function(){return R};Z.isSvgSupported=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")};
Z.prototype.D=function(){var a=document.querySelectorAll("[data-annotate]"),b=this,c=["underline","highlight","strike"];y(a,function(a){var e=a.getAttribute("data-annotate")||"",g=e.split(/\s+/);if(3!==g.length)window.console.log('data-annotate problem with "'+e+'" 3 parameters expected');else if(z(c,g[0]))b[g[0]](a,g[1],g[2]);else window.console.log('data-annotate problem with "'+e+'" unknown operation')})};Z.prototype.annotateDocument=Z.prototype.D;
Z.prototype.W=function(a){J(this.q.options,a);return this};Z.prototype.setUnderlineOptions=Z.prototype.W;Z.prototype.U=function(a){J(this.k.options,a);return this};Z.prototype.setHighlightOptions=Z.prototype.U;Z.prototype.V=function(a){J(this.o.options,a);return this};Z.prototype.setStrikeOptions=Z.prototype.V;Z.prototype.K=function(){return R};Z.prototype.getTemplates=Z.prototype.K;Z.prototype.aa=function(a,b,c){return Lb(this.q,a,b,c)};Z.prototype.underline=Z.prototype.aa;
Z.prototype.M=function(a,b,c){return Lb(this.k,a,b,c)};Z.prototype.highlight=Z.prototype.M;Z.prototype.strike=function(a,b,c){return Lb(this.o,a,b,c)};Z.prototype.strike=Z.prototype.strike;
function Mb(a,b,c,d){if("undefined"===typeof rangy)throw Error("Rangy Framework is not found");var e=rangy.getSelection();b=a[b];a.h||(rangy.init(),a.h=rangy.createCssClassApplier("tvs-annotated-text"));a.h.applyToSelection();var g=[];y(e.getAllRanges(),function(b){y(b.getNodes(),function(b){(b=a.h.getSelfOrAncestorWithClass(b))&&(z(Ma(b),"tvs-annotated-text")&&!z(g,b))&&g.push(b)})});rangy.getSelection().detach();return ta(b.apply(a,[g,c,d]))}
Z.prototype.$=function(a){var b=[],c=this,b=qa(b,Y(this.q,a)),b=qa(b,Y(this.k,a)),b=qa(b,Y(this.o,a));y(b,function(a){var b;!La||D&&H("9")&&!H("10")&&n.SVGElement&&a instanceof n.SVGElement?(b=a.parentNode,b=ba(b)&&1==b.nodeType?b:null):b=a.parentElement;b&&(b=rangy.createRange(),b.selectNode(a),c.h.undoToRange(b))})};Z.prototype.unannotateElement=Z.prototype.$;Z.prototype.ba=function(a,b){return Mb(this,"underline",a,b)};Z.prototype.underlineSelected=Z.prototype.ba;
Z.prototype.N=function(a,b){return Mb(this,"highlight",a,b)};Z.prototype.highlightSelected=Z.prototype.N;Z.prototype.X=function(a,b){return Mb(this,"strike",a,b)};Z.prototype.strikeSelected=Z.prototype.X;})();
